<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- JAVA와 연결할 Mapper 파일 설정 -->
<mapper namespace="poly.persistance.mapper.IMovieMapper">
	<insert id="InsertMovieInfo" parameterType="MovieDTO">
		insert into movie_info
			(
				rank_chkeck_time,
				seq,
				movie_rank,
				movie_nm,
				movie_reserve,
				score,
				open_day,
				reg_id,
				chg_id
			)
		values(
			#{rank_chkeck_time},
			(select nvl(max(a.seq),0)+1 from movie_info a where a.rank_chkeck_time = #{rank_chkeck_time}),
			#{movie_rank},
			#{movie_nm},
			#{movie_reserve},
			#{score},
			#{open_day},
			#{reg_id},
			#{reg_id}				
		)
	</insert>
</mapper>