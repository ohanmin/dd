<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- JAVA와 연결할 Mapper 파일 설정 -->
<mapper namespace="poly.persistance.mapper.UserInfoMapper">
	<!-- 회원 등록 -->
	<insert id="insertUserInfo" parameterType="UserInfoDTO">
		insert into user_info
			(
				user_id,
				user_name,
				password,
				email,
				addr1,
				addr2,
				reg_id,
				reg_dt,
				chg_id,
				chg_dt
			)
		values(
			#{user_id},
			#{user_name},
			#{password},
			#{email},
			#{addr1},
			#{addr2},
			#{user_id},
			sysdate,
			#{user_id},
			sysdate
		)
	</insert>
	<!-- 이메일 중복 방지 -->
	<select id="getUserExists" parameterType="UserInfoDTO" resultType="UserInfoDTO">
		select decode(count(1),0,'N','Y') as exixts_yn
		from user_info
		where email = #{email}
	</select>
	<!-- 로그인을 위해 아이디와 비밀번호가 일치하는지 확인하기 -->
	<select id="getUserLoginCheck" parameterType="UserInfoDTO" resultType="UserInfoDTO">
		SELECT USER_ID, USER_NAME, EMAIL FROM USER_INFO WHERE USER_ID = #{user_id} AND PASSWORD = #{password}
	</select>
</mapper>